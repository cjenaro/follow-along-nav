<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <link rel="stylesheet" href="./main.css" />
    <title>Follow Along Nav</title>
  </head>
  <body>
    <nav class="top">
      <div class="dropdown-background">
        <span class="arrow"></span>
      </div>

      <ul class="cool">
        <li>
          <a href="#">About Me</a>
          <div class="dropdown me">
            <h1>Hello</h1>
            <p>My name is Jenaro</p>
          </div>
        </li>
        <li>
          <a href="#">Other</a>
          <div class="dropdown other">
            <h1>Hello again</h1>
            <p>This is</p>
            <p>More text</p>
          </div>
        </li>
        <li>
          <a href="#">Other again</a>
          <div class="dropdown other-again">
            <h1>Hello AGAIN!</h1>
            <ul>
              <li>
                <p>Here is more text</p>
              </li>
              <li>
                <p>Here is more text</p>
              </li>
              <li>
                <p>Here is more text</p>
              </li>
              <li>
                <p>Here is more text</p>
              </li>
              <li>
                <p>Here is more text</p>
              </li>
            </ul>
          </div>
        </li>
      </ul>
    </nav>

    <script>
      const navItems = document.querySelectorAll('.cool>li')
      const navBg = document.querySelector('.dropdown-background')
      const nav = document.querySelector('.top')

      function handleEnter() {
        const dropdown = this.querySelector('.dropdown')
        dropdown.classList.add('trigger-enter')
        setTimeout(() => dropdown.classList.contains('trigger-enter') && dropdown.classList.add('trigger-enter-active'), 150)
        const coords = dropdown.getBoundingClientRect();
        const navCoords = nav.getBoundingClientRect();
        navBg.style.width = `${coords.width}px`
        navBg.style.height = `${coords.height}px`
        const dropdownPadding = window.getComputedStyle(dropdown, null).getPropertyValue('padding-top')
        navBg.style.transform = `translate(${coords.left - navCoords.left}px, ${coords.top - navCoords.top + parseInt(dropdownPadding.slice(0,2))}px)`
        navBg.classList.add('open')
      }

      function handleLeave() {
        navBg.classList.remove('open')
        const dropdown = this.querySelector('.dropdown')
        dropdown.classList.remove('trigger-enter')
        dropdown.classList.remove('trigger-enter-active')
      }

      navItems.forEach(item => item.addEventListener('mouseenter', handleEnter))
      navItems.forEach(item => item.addEventListener('mouseleave', handleLeave))
    </script>
  </body>
</html>
